{% extends 'base.html.twig' %}

{% block title %}Adherant index{% endblock %}

{% block body %}
<div class="userIndex">

    <h1 class="title title--h1">Adherant index</h1>
    <div class="userIndex__bouton">
        <a href="" class="bouton bouton--primary">Retour</a>
        <a href="" class="bouton bouton--primary">Nouvel Adherant</a>
    </div>

    <form action="" class="userIndex__search">
        <input type="submit" value="rechercher" class="search--btn">
        <input type="text" name="" id="" class="search--input" placeholder="Rechercher nom,prenom,licence">
    </form>

    <div class="userIndex__filters">
        <div class="filters">
            
            <div class="filters__items">
                <p>Competiteur</p>
                <input type="checkbox" name="" id="" class="toggle toggle--off">
            </div>
            
            <div class="filters__items">
                <p>Kata</p>
                <input type="checkbox" name="" id="" class="toggle toggle--off">
            </div>
            
            <div class="filters__items">
                <p>Arbitre</p>
                <input type="checkbox" name="" id="" class="toggle toggle--off">
            </div>
            
            <div class="filters__items">
                <p>Commissaire</p>
                <input type="checkbox" name="" id="" class="toggle toggle--off">
            </div>
            
            <div class="filters__items">
                <p>Pole</p>
                <input type="checkbox" name="" id="" class="toggle toggle--off">
            </div>
            
            <div class="filters__items">
                <p>Professeur</p>
                <input type="checkbox" name="" id="" class="toggle toggle--off">
            </div>
            
            <div class="filters__items">
                <p>Impayer</p>
                <input type="checkbox" name="" id="" class="toggle toggle--off">
            </div>
            
            <div class="filters__items">
                <p>Non licencié</p>
                <input type="checkbox" name="" id="" class="toggle toggle--off">
            </div>
            
            <div class="filters__items">
                <p>Non validé</p>
                <input type="checkbox" name="" id="" class="toggle toggle--off">
            </div>
            
            <div class="filters__items">
                <p>Sans certificat</p>
                <input type="checkbox" name="" id="" class="toggle toggle--off">
            </div>

        </div>
        
        <div class="filters__select">
            
            <div class="select__grade">
                <select name="" id="">
                    <option value="">Grade</option>
                    {% for grade in grades %}
                        
                    <option value="{{grade.ceinture}}">{{grade.ceinture}}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="select__categorie">
                <select name="" id="">
                    <option value="">Catégorie</option>
                    <option value="Vétérant">Vétérant</option>
                    <option value="Sénior">Sénior</option>
                    <option value="Junior">Junior</option>
                    <option value="Cadet">Cadet</option>
                    <option value="Minime">Minime</option>
                    <option value="Poussin">Poussin</option>
                    <option value="Prépoussin">Prépoussin</option>
                    <option value="BabyJudo">BabyJudo</option>
                </select>
            </div>

        </div>

        <a href="#" class="bouton bouton--primary">Filtrer</a>
    </div>

    <div class="userIndex__grid">

    {% for adherant in adherants %}
        
        <div class="cell">
            <div class="cell--1">
                <p>{{adherant.nom|upper}}</p>
                <p>{{adherant.prenom|capitalize}}</p>
            </div>
            <div class="cell--1">
            {% if adherant.roleClub %}
                
                {% if not adherant.roleClub.grade %}
                    
                    <p>NC</p>
                
                {% else %}
                    <p>{{adherant.roleClub.grade.ceinture}}</p>
                {% endif %}
                
            {% else %}
                    <p>NC</p>
            {% endif %}

                <p>
                    {% set difference = date('now').diff(date(adherant.dateDeNaissance)) %}
                    {% set age = difference.days %}
                    {#todo a partir de l'age, deduire la categorie d'age de l'adherant  #}
                    {#? Age = nombre de jours de la naissance a maintenant  #}
                        {#? age = +30ans  #}
                    {% if  (30*365.25)-122 < age   %}
                            Veterant
                        
                            {#? age = 20-30ans  #}

                        {% elseif  (20*365.25)-122 < age and age < (30*365.25)-123 %}
                            Senior
                        
                            {#? age = 19ans  #}

                        {% elseif (19*365.25)-122 < age and age < (20*365.25)-123 %}
                            Junior 3
                        
                            {#? age = 18ans  #}

                        {% elseif (18*365.25)-122 < age and age < (19*365.25)-123 %}
                            Junior 2
                        
                            {#? age =  17ans  #}

                        {% elseif (17*365.25)-122 < age and age < (18*365.25)-123 %}
                            Junior 1
                        
                            {#? age = 16ans  #}

                        {% elseif (16*365.25)-122 < age and age < (17*365.25)-123 %}
                            Cadet 3
                        
                            {#? age = 15ans  #}

                        {% elseif (15*365.25)-122 < age and age < (16*365.25)-123 %}
                            Cadet 2
                        
                            {#? age = 14ans  #}

                        {% elseif (14*365.25)-122 < age and age < (15*365.25)-123 %}
                            Cadet 1
                        
                            {#? age = 13ans  #}

                        {% elseif (13*365.25)-122 < age and age < (14*365.25)-123 %}
                            Minime 2
                        
                            {#? age = 12ans  #}

                        {% elseif (12*365.25)-122 < age and age < (13*365.25)-123 %}
                            Minime 1
                        
                            {#? age = 11ans  #}

                        {% elseif (11*365.25)-122 < age and age < (12*365.25)-123 %}
                            Benjamin 2
                        
                            {#? age =  10ans #}

                        {% elseif (10*365.25)-122 < age and age < (11*365.25)-123 %}
                            Benjamin 1
                        
                            {#? age = 9ans  #}

                        {% elseif (9*365.25)-122 < age and age < (10*365.25)-123 %}
                            Poussin 2
                        
                            {#? age = 8ans  #}

                        {% elseif (8*365.25)-122 < age and age < (9*365.25)-123 %}
                            Poussin 1
                        
                            {#? age =  7ans #}

                        {% elseif (7*365.25)-122 < age and age < (8*365.25)-123 %}
                            Prépoussin 2
                        
                            {#? age = 6ans  #}

                        {% elseif (6*365.25)-122 < age and age < (7*365.25)-123 %}
                            Prépoussin 1
                        
                            {#? age = -5ans  #}

                        {% elseif  age < (6*365.25)-123 %}
                            Baby-Judo

                    {% endif %}


                </p>

            </div>
            <div class="cell--2">
                {% if adherant.administratif %}
                    {% if adherant.administratif.licence %}
                    {{adherant.administratif.licence}}
                    {% else %}
                        NC
                    {% endif %}

                {% else %}
                    NC
                {% endif %}
            
            </div>
            <a href="#" class="bouton bouton--primary">Afficher</a>
        </div>
    {% endfor %}


    </div>
</div>
{% endblock %}
